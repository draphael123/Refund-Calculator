<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculate medication payment costs, weekly expenses, and medication breakdown. Free online calculator for medication cost analysis.">
    <meta name="keywords" content="medication calculator, payment calculator, medication cost, healthcare calculator">
    <meta name="author" content="Medication Payment Calculator">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Medication Payment Calculator">
    <meta property="og:description" content="Calculate your medication costs and payment breakdown">
    <meta property="og:url" content="https://refund-calculator-3jaa1o9z4-daniel-8982s-projects.vercel.app">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Medication Payment Calculator">
    <meta property="twitter:description" content="Calculate your medication costs and payment breakdown">
    
    <title>Medication Payment Calculator - Free Online Calculator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíä</text></svg>">
</head>
<body>
    <div class="theme-toggle-container">
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
            <span class="theme-icon">üåô</span>
        </button>
    </div>
    
    <div class="container">
        <div class="calculator-card">
            <h1>Medication Payment Calculator</h1>
            <p class="subtitle">Calculate your medication costs and payment breakdown</p>
            
            <form id="calculatorForm" novalidate>
                <div class="input-group">
                    <label for="amountPaid">
                        Amount Paid ($)
                        <span class="tooltip-icon" data-tooltip="Enter the total amount the patient has paid for the medication">‚ÑπÔ∏è</span>
                    </label>
                    <input 
                        type="number" 
                        id="amountPaid" 
                        name="amountPaid" 
                        step="0.01" 
                        min="0" 
                        placeholder="Enter amount paid"
                        required
                        aria-describedby="amountPaid-error"
                        aria-invalid="false"
                    >
                    <span class="error-message" id="amountPaid-error" role="alert"></span>
                    <span class="validation-icon"></span>
                </div>
                
                <div class="input-group">
                    <label for="medicationDispensed">
                        Amount of Medication Dispensed
                        <span class="tooltip-icon" data-tooltip="Enter the medication amount (e.g., 100mg, 50ml, or just 100). Supports unit conversion.">‚ÑπÔ∏è</span>
                    </label>
                    <div class="input-with-unit">
                        <input 
                            type="text" 
                            id="medicationDispensed" 
                            name="medicationDispensed" 
                            placeholder="Enter medication amount (e.g., 100mg or 100)"
                            required
                            aria-describedby="medicationDispensed-error"
                            aria-invalid="false"
                        >
                        <select id="medicationUnit" aria-label="Medication unit">
                            <option value="">Auto</option>
                            <option value="mg">mg</option>
                            <option value="g">g</option>
                            <option value="ml">ml</option>
                            <option value="l">L</option>
                            <option value="units">units</option>
                        </select>
                    </div>
                    <span class="error-message" id="medicationDispensed-error" role="alert"></span>
                    <span class="validation-icon"></span>
                </div>
                
                <div class="input-group">
                    <label for="weeksPaid">
                        Number of Weeks Paid
                        <span class="tooltip-icon" data-tooltip="Enter the number of weeks the patient paid for (e.g., 4 weeks or 4)">‚ÑπÔ∏è</span>
                    </label>
                    <input 
                        type="text" 
                        id="weeksPaid" 
                        name="weeksPaid" 
                        placeholder="Enter number of weeks (e.g., 4 weeks or 4)"
                        required
                        aria-describedby="weeksPaid-error"
                        aria-invalid="false"
                    >
                    <span class="error-message" id="weeksPaid-error" role="alert"></span>
                    <span class="validation-icon"></span>
                </div>
                
                <div class="medications-section">
                    <div class="section-header">
                        <label>
                            Medications from Spreadsheet
                            <span class="tooltip-icon" data-tooltip="Select medications from the spreadsheet to calculate refunds. Click + to add multiple medications.">‚ÑπÔ∏è</span>
                        </label>
                    </div>
                    <div id="medicationsList" class="medications-list">
                        <div class="medication-item" data-medication-index="0">
                            <div class="medication-selector">
                                <select class="medication-dropdown" data-index="0" aria-label="Select medication">
                                    <option value="">-- Select Medication --</option>
                                </select>
                                <button type="button" class="remove-medication-btn" data-index="0" aria-label="Remove medication" style="display: none;">
                                    <span>üóëÔ∏è</span>
                                </button>
                            </div>
                            <div class="medication-details hidden" data-details-index="0">
                                <div class="medication-info">
                                    <div class="info-row">
                                        <span class="info-label">Amount Paid:</span>
                                        <span class="info-value" data-field="amountPaid">$0.00</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Medication Dispensed:</span>
                                        <span class="info-value" data-field="medicationDispensed">0</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Weeks Paid:</span>
                                        <span class="info-value" data-field="weeksPaid">0</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Weeks Received:</span>
                                        <span class="info-value" data-field="weeksReceived">0</span>
                                    </div>
                                    <div class="info-row highlight">
                                        <span class="info-label">Refund:</span>
                                        <span class="info-value" data-field="refund">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="add-medication-btn" id="addMedicationBtn" aria-label="Add another medication">
                        <span>‚ûï</span> Add Medication
                    </button>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="calculate-btn" id="calculateBtn">
                        <span class="btn-text">Calculate</span>
                        <span class="btn-loader hidden"></span>
                    </button>
                    <button type="button" class="clear-btn" id="clearBtn">Clear</button>
                </div>
            </form>
            
            <div id="results" class="results hidden">
                <div class="results-header">
                    <h2>Calculation Results</h2>
                    <div class="results-actions">
                        <button class="action-btn" id="copyBtn" aria-label="Copy results">
                            <span>üìã</span> Copy
                        </button>
                        <button class="action-btn" id="printBtn" aria-label="Print results">
                            <span>üñ®Ô∏è</span> Print
                        </button>
                        <button class="action-btn" id="shareBtn" aria-label="Share results">
                            <span>üîó</span> Share
                        </button>
                    </div>
                </div>
                
                <div class="results-content">
                    <div class="result-item">
                        <span class="result-label">Cost per Week:</span>
                        <span class="result-value" id="costPerWeek">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Cost per Unit of Medication:</span>
                        <span class="result-value" id="costPerUnit">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Medication per Week:</span>
                        <span class="result-value" id="medicationPerWeek">0.00</span>
                    </div>
                    <div class="result-item highlight">
                        <span class="result-label">Total Weekly Cost per Unit:</span>
                        <span class="result-value" id="weeklyCostPerUnit">$0.00</span>
                    </div>
                    <div class="result-item refund-summary-item" id="totalRefundItem" style="display: none;">
                        <span class="result-label">Total Intended Refund:</span>
                        <span class="result-value" id="totalIntendedRefund">$0.00</span>
                    </div>
                    
                    <div class="additional-calculations">
                        <h3>Projections</h3>
                        <div class="result-item">
                            <span class="result-label">Cost for 1 Month (4 weeks):</span>
                            <span class="result-value" id="costOneMonth">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Cost for 3 Months (12 weeks):</span>
                            <span class="result-value" id="costThreeMonths">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Cost for 6 Months (24 weeks):</span>
                            <span class="result-value" id="costSixMonths">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Cost for 1 Year (52 weeks):</span>
                            <span class="result-value" id="costOneYear">$0.00</span>
                        </div>
                    </div>
                    
                    <div class="refund-summary" id="refundSummary" style="display: none;">
                        <h3>Refund Summary</h3>
                        <div class="result-item refund">
                            <span class="result-label">Total Refund Amount:</span>
                            <span class="result-value" id="totalRefund">$0.00</span>
                        </div>
                        <div id="medicationRefundsList" class="medication-refunds-list"></div>
                    </div>
                </div>
            </div>
            
            <div id="calculationHistory" class="history-section hidden">
                <div class="history-header">
                    <h3>Recent Calculations</h3>
                    <button class="clear-history-btn" id="clearHistoryBtn">Clear History</button>
                </div>
                <div id="historyList" class="history-list"></div>
            </div>
        </div>
    </div>
    
    <div id="tooltip" class="tooltip hidden"></div>
    <div id="toast" class="toast hidden"></div>
    
    <script src="script.js"></script>
</body>
</html>
